{% extends "base.html" %}

{% block title %}
    Custos Adicionais - Julli's Brigadeiros
{% endblock %}

{% block subtitle %}
    Gest√£o de Custos Adicionais
{% endblock %}

{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
        <h1>üì¶ Custos Adicionais</h1>
        <a href="{{ url_for('novo_custo_adicional') }}" class="btn btn-primary">
            ‚ûï Novo Custo
        </a>
    </div>

    {% if custos %}
        <div class="custos-grid">
            {% for custo in custos %}
                <div class="custo-card">
                    <div class="custo-header">
                        <h3>{{ custo['nome'] }}</h3>
                        <span class="custo-tipo">{{ custo['tipo'] }}</span>
                    </div>

                    <div class="custo-detalhes">
                        <div class="custo-info">
                            <span class="custo-label">Custo Unit√°rio:</span>
                            <span class="custo-valor">R$ {{ "%.2f"|format(custo['custo_unitario']) }}</span>
                        </div>

                        <div class="custo-info">
                            <span class="custo-label">Unidade:</span>
                            <span class="custo-valor">{{ custo['unidade_medida'] or 'N/A' }}</span>
                        </div>

                        <div class="custo-info">
                            <span class="custo-label">Vida √ötil:</span>
                            <span class="custo-valor">
                                {% if custo['vida_util'] and custo['vida_util'] > 0 %}
                                    {{ custo['vida_util'] }} receitas
                                {% else %}
                                    Uso √∫nico
                                {% endif %}
                            </span>
                        </div>

                        {% if custo['descricao'] %}
                        <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #f0f0f0;">
                            <p style="margin: 0; color: var(--text-light); font-size: 0.9rem;">
                                {{ custo['descricao'] }}
                            </p>
                        </div>
                        {% endif %}
                    </div>

                    <div class="item-actions">
                        <a href="{{ url_for('editar_custo_adicional', custo_id=custo['id']) }}" class="btn btn-small btn-secondary">
                            ‚úèÔ∏è Editar
                        </a>
                        <form action="{{ url_for('excluir_custo_adicional', custo_id=custo['id']) }}" method="POST" style="display: inline;">
                            <button type="submit" class="btn btn-small btn-danger"
                                    onclick="return confirm('Tem a certeza de que deseja excluir este custo?')">
                                üóëÔ∏è Excluir
                            </button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">üì¶</div>
            <h3>Nenhum custo adicional cadastrado</h3>
            <p>Adicione custos como embalagens, energia e g√°s para calcular melhor os seus pre√ßos.</p>
            <a href="{{ url_for('novo_custo_adicional') }}" class="btn btn-primary" style="margin-top: 1rem;">
                ‚ûï Adicionar Primeiro Custo
            </a>
        </div>
    {% endif %}
</div>

<div class="nav-buttons">
    <a href="{{ url_for('index') }}" class="btn btn-secondary">
        üè† Voltar ao In√≠cio
    </a>
</div>
{% endblock %}