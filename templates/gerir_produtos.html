{% extends "base.html" %}
{% block title %}Gerir Produtos{% endblock %}
{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h1>üõçÔ∏è Cat√°logo de Produtos</h1>
        <a href="{{ url_for('criar_produto') }}" class="btn btn-primary">‚ûï Novo Produto</a>
    </div>

    {% if produtos %}
    <ul class="item-list">
        {% for produto in produtos %}
        <li class="item-list-item">
            <div class="item-info">
                <span class="item-name">{{ produto['nome'] }}</span>
                <div class="item-details">Pre√ßo de Venda: R$ {{ "%.2f"|format(produto['preco_venda']) }}</div>
                <div class="item-details" style="color: var(--success-green);">Custo Estimado: R$ {{ "%.2f"|format(calcular_custo_produto(produto['id'])) }}</div>
            </div>
            <div class="item-actions">
                    <a href="{{ url_for('editar_produto', produto_id=produto['id']) }}" class="btn btn-small btn-secondary">
                        ‚úèÔ∏è Editar
                    </a>

                    <form action="{{ url_for('excluir_produto', produto_id=produto['id']) }}" method="POST" onsubmit="return confirm('Tem a certeza que deseja excluir este produto?');">
                        <button type="submit" class="btn btn-small btn-danger">üóëÔ∏è Excluir</button>
                    </form>
            </div>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <div class="empty-state">
        <p>Nenhum produto cadastrado. Crie o seu primeiro item de venda!</p>
    </div>
    {% endif %}
</div>
{% endblock %}